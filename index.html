<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>むらひとの色々</title>
    <!-- Tailwind CSSを読み込み -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Noto Sans JP と Inter を読み込み -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Material Icons を読み込み (アイコンは引き続き使用) -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        /* カスタムCSSとアニメーション */
        :root {
            --bg-color-dark: #1a1a2e;
            --text-color-light: #e0e0e0;
            --accent-color-1: #e94560;
            --accent-color-2: #0f3460;
            --highlight-color: #533483;
            --card-bg: #222831; /* カードの背景色 */
        }
        body {
            font-family: 'Inter', 'Noto Sans JP', sans-serif;
            background: linear-gradient(45deg, var(--bg-color-dark) 0%, var(--accent-color-2) 100%);
            background-size: 400% 400%;
            animation: gradientAnimation 15s ease infinite;
            color: var(--text-color-light);
            line-height: 1.6;
            scroll-behavior: smooth;
            overflow-x: hidden; /* 横スクロール防止 */
        }
        @keyframes gradientAnimation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        /* ナビゲーションバーのスタイル */
        nav {
            background-color: rgba(34, 40, 49, 0.9); /* 半透明のカード背景色 */
            backdrop-filter: blur(8px); /* 背景をぼかす */
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            position: sticky;
            top: 0;
            z-index: 1000;
            transition: all 0.4s ease-in-out;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        nav ul li a {
            padding: 1rem 1.5rem;
            display: block;
            color: var(--text-color-light);
            font-weight: 500;
            transition: all 0.3s ease-in-out;
            position: relative;
            overflow: hidden;
        }
        nav ul li a::after {
            content: '';
            position: absolute;
            left: 50%;
            bottom: 0;
            width: 0;
            height: 3px;
            background-color: var(--accent-color-1);
            transition: all 0.3s ease-in-out;
            transform: translateX(-50%);
        }
        nav ul li a:hover::after {
            width: 100%;
        }
        nav ul li a.active {
            color: var(--accent-color-1);
        }
        nav ul li a.active::after {
            width: 100%;
        }
        /* ボトムナビゲーションのスタイル */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: rgba(34, 40, 49, 0.9); /* 半透明のカード背景色 */
            backdrop-filter: blur(8px);
            box-shadow: 0 -4px 15px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            display: flex;
            justify-content: space-around;
            padding: 0.5rem 0;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        .bottom-nav a {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--text-color-light);
            font-size: 0.75rem;
            padding: 0.5rem 0;
            transition: all 0.3s ease-in-out;
            border-radius: 0.5rem;
        }
        .bottom-nav a .material-icons {
            font-size: 1.5rem;
            margin-bottom: 0.25rem;
            transition: transform 0.3s ease-in-out;
        }
        .bottom-nav a:hover .material-icons {
            transform: translateY(-3px);
            color: var(--accent-color-1);
        }
        .bottom-nav a.active {
            color: var(--accent-color-1);
        }
        /* セクションのスタイル (カード風) */
        section {
            background-color: var(--card-bg);
            border-radius: 1rem;
            padding: 2.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
            transition: transform 0.8s cubic-bezier(0.25, 1, 0.5, 1), opacity 0.8s cubic-bezier(0.25, 1, 0.5, 1);
            transform: translateY(50px) scale(0.95);
            opacity: 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        section.visible {
            transform: translateY(0) scale(1);
            opacity: 1;
        }
        /* ボタンのスタイル */
        .cool-button {
            background: linear-gradient(90deg, var(--accent-color-1) 0%, var(--highlight-color) 100%);
            color: white;
            padding: 0.8rem 1.8rem;
            border-radius: 0.75rem;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.4s ease-in-out;
            cursor: pointer;
            border: none;
            outline: none;
            position: relative;
            overflow: hidden;
            letter-spacing: 0.05em;
            text-transform: uppercase;
        }
        .cool-button:hover {
            background: linear-gradient(90deg, var(--highlight-color) 0%, var(--accent-color-1) 100%);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4), 0 0 20px var(--accent-color-1); /* グローエフェクト */
            transform: translateY(-3px) scale(1.02);
        }
        .cool-button:active {
            transform: translateY(0);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }
        /* 波紋エフェクト (ボタンとリンクに適用) */
        .ripple {
            position: absolute;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.4);
            animation: ripple-animation 0.6s linear forwards;
            transform: scale(0);
            pointer-events: none;
        }
        @keyframes ripple-animation {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }
        /* iframeのスタイルとアニメーション */
        .responsive-iframe {
            width: 100%;
            height: 0;
            overflow: hidden;
            border: none;
            border-radius: 0.75rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: height 0.6s cubic-bezier(0.25, 1, 0.5, 1), opacity 0.6s cubic-bezier(0.25, 1, 0.5, 1);
            opacity: 0;
            margin-top: 1.5rem;
            background-color: #ffffff; /* iframeの背景を白に */
        }
        .responsive-iframe.show {
            height: 400px; /* 表示時の高さ */
            opacity: 1;
        }
        /* SNSアイコンのスタイル */
        .sns-icon {
            width: 2.5rem;
            height: 2.5rem;
            margin-right: 0.75rem;
            transition: transform 0.3s ease-in-out, filter 0.3s ease-in-out;
            border-radius: 0.5rem;
            filter: grayscale(50%); /* デフォルトで少しモノクロ */
        }
        .sns-icon:hover {
            transform: scale(1.15) rotate(5deg);
            filter: grayscale(0%); /* ホバーでカラーに */
        }
        /* リンクのスタイル */
        a {
            color: var(--accent-color-1);
            text-decoration: none;
            transition: color 0.3s ease-in-out;
        }
        a:hover {
            color: var(--highlight-color);
            text-decoration: underline;
        }
        /* レスポンシブデザイン */
        @media (max-width: 768px) {
            nav {
                display: none;
            }
            .bottom-nav {
                display: flex;
            }
            .container {
                padding: 1rem;
                margin-bottom: 5rem; /* ボトムナビの分スペースを確保 */
            }
            section {
                padding: 1.5rem;
            }
        }
        @media (min-width: 769px) {
            nav {
                display: block;
            }
            .bottom-nav {
                display: none;
            }
            .container {
                max-width: 960px;
                margin: 0 auto;
                padding: 2rem 0;
            }
        }
    </style>
</head>
<body>
    <!-- トップナビゲーションバー -->
    <nav class="hidden md:block">
        <div class="container mx-auto flex justify-center py-4">
            <ul class="flex space-x-6">
                <li><a href="#introduction" class="nav-link active">自己紹介</a></li>
                <li><a href="#madamisu" class="nav-link">マダミス・ストプレ・TRPG</a></li>
                <li><a href="#schedule" class="nav-link">スケジュール</a></li>
                <li><a href="#sns" class="nav-link">SNS</a></li>
                <li><a href="#bots" class="nav-link">BOT</a></li>
            </ul>
        </div>
    </nav>
    <!-- ボトムナビゲーションバー (モバイル用) -->
    <div class="bottom-nav md:hidden">
        <a href="#introduction" class="bottom-nav-link active">
            <i class="material-icons">person</i>
            自己紹介
        </a>
        <a href="#madamisu" class="bottom-nav-link">
            <i class="material-icons">casino</i>
            マダミス
        </a>
        <a href="#schedule" class="bottom-nav-link">
            <i class="material-icons">calendar_today</i>
            スケジュール
        </a>
        <a href="#sns" class="bottom-nav-link">
            <i class="material-icons">share</i>
            SNS
        </a>
        <a href="#bots" class="bottom-nav-link">
            <i class="material-icons">android</i>
            BOT
        </a>
    </div>
    <div class="container mx-auto px-4 md:px-0 mt-8">
        <!-- 自己紹介セクション -->
        <section id="introduction" class="section-card">
            <h2 class="text-3xl font-bold mb-4 text-gray-100">自己紹介</h2>
            <p class="text-lg mb-2">日々プログラムを書くSE♂。</p>
            <p class="text-lg">最近は、マーダーミステリー・ストーリープレイング・TRPG・スプラトゥーンで主に遊んでいる。</p>
        </section>
        <!-- マダミス・ストプレ・TRPGセクション -->
        <section id="madamisu" class="section-card">
            <h2 class="text-3xl font-bold mb-4 text-gray-100">マダミス・ストプレ・TRPG</h2>
            <h3 class="text-2xl font-semibold mb-4 text-gray-200">通過or通過予定のシナリオ</h3>
            <button id="passed-scenario-toggle" class="cool-button mb-4">通過済み・予定シナリオを表示</button>
            <iframe id="passed-scenario-iframe" class="responsive-iframe" src="https://docs.google.com/spreadsheets/d/e/2PACX-1vSKeyDIJNmixBw3sXOHaNkdYRYRnQWJS7SYrGIa8JUgiFTi8Qw1f6zU-NWGJz17sjbNZu26bn6r6BNj/pubhtml?widget=true&amp;headers=false"></iframe>
            <h3 class="text-2xl font-semibold mb-4 mt-8 text-gray-200">GM可能なシナリオ</h3>
            <button id="gm-scenario-toggle" class="cool-button mb-4">GM可能なシナリオを表示</button>
            <iframe id="gm-scenario-iframe" class="responsive-iframe" src="https://docs.google.com/spreadsheets/d/e/2PACX-1vTfwTKFVBioZ7ipaD6x8tT_ANSpvpDLQJ0QXBlI6tHyVNPikyOAG-3jg_nIcFAetYQAI0FIabX2E0Yl/pubhtml?widget=true&amp;headers=false"></iframe>
        </section>
        <!-- スケジュールセクション -->
        <section id="schedule" class="section-card">
            <h2 class="text-3xl font-bold mb-4 text-gray-100">スケジュール</h2>
            <button id="schedule-toggle" class="cool-button mb-4">スケジュールを非表示</button>
            <iframe id="schedule-iframe" class="responsive-iframe show" src="https://calendar.google.com/calendar/embed?wkst=1&ctz=Asia%2FTokyo&showPrint=0&showTitle=0&src=ZG9yaW4uYS5tb29uLjgxMkBnbWFpbC5jb20&src=NTI2NWU0ZWMwNTZlMGJkNWVkZGE3NTYzODllMjliNWUyOWNkYjk2MjU2Yzk3ZmIzMzQ3YjI2YmNiMmRjOWU2N0Bncm91cC5jYWxlbmRhci5nb29nbGUuY29t&src=NDA4NTAwODVkNzk1MGY0ZjE3NGI0ZmE1ZjQwYmM1NjY5Y2RmY2NmNTcyZTI5NjZmMjBiZDNhYjg4OGMzYTk2ZkBncm91cC5jYWxlbmRhci5nb29nbGUuY29t&src=Y2YwNDI1ZWUzNjZjZWZiMzI0MDlhM2UwYTIwMDY1NGRmMjA1MjgyNmQzNThjMDIxODllNDc1MThlNzE0MWQ5M0Bncm91cC5jYWxlbmRhci5nb29nbGUuY29t&src=amEuamFwYW5lc2UjaG9saWRheUBncm91cC52LmNhbGVuZGFyLmdvb2dsZS5jb20&color=%234285F4&color=%23D81B60&color=%23EF6C00&color=%233F51B5&color=%23009688" style="border-width:0" frameborder="0" scrolling="no"></iframe>
        </section>
        <!-- SNS等セクション -->
        <section id="sns" class="section-card">
            <h2 class="text-3xl font-bold mb-4 text-gray-100">SNS等</h2>
            <ul class="space-y-4">
                <li>
                    <a href="https://x.com/murahito130" class="flex items-center text-lg text-blue-400 hover:text-blue-200 transition-colors duration-300">
                        <img class="sns-icon" src="https://about.x.com/content/dam/about-twitter/x/brand-toolkit/logo-black.png" alt="X" onerror="this.onerror=null;this.src='https://placehold.co/40x40/333333/e0e0e0?text=X';" />
                        X (旧Twitter)
                    </a>
                </li>
                <li>
                    <a href="https://github.com/murahito130/murahito130.github.io" class="flex items-center text-lg text-blue-400 hover:text-blue-200 transition-colors duration-300">
                        <img class="sns-icon" src="https://github.githubassets.com/assets/GitHub-Mark-ea2971cee799.png" alt="github" onerror="this.onerror=null;this.src='https://placehold.co/40x40/333333/e0e0e0?text=GH';" />
                        github
                    </a>
                </li>
                <li>
                    <a href="https://lounge.nintendo.com/friendcode/0645-0135-9421/C7V6SDr8Vp" class="flex items-center text-lg text-blue-400 hover:text-blue-200 transition-colors duration-300">
                        <img class="sns-icon" src="https://www.nintendo.com/jp/hardware/switch/img/10-mv/logo-with-shadow.png" alt="NSW" onerror="this.onerror=null;this.src='https://placehold.co/40x40/333333/e0e0e0?text=NSW';" />
                        Nintendo Switch フレンドコード SW-0645-0135-9421
                    </a>
                </li>
            </ul>
        </section>
        <!-- 公開しているBOTとかアプリとかセクション -->
        <section id="bots" class="section-card">
            <h2 class="text-3xl font-bold mb-4 text-gray-100">公開しているBOTとかアプリとか</h2>
            <ul class="space-y-4">
                <li><a href="https://qiita.com/murahito/items/127da46d03a510f98bca" class="text-lg text-blue-400 hover:text-blue-200 transition-colors duration-300">アーカイブ君</a></li>
                <li><a href="https://github.com/murahito130/Google-Calendar-to-Discord-Notifier" class="text-lg text-blue-400 hover:text-blue-200 transition-colors duration-300">Google Calendar to Discord Notifier</a></li>
            </ul>
        </section>
    </div>
    <script>
        // DOMContentLoadedイベントでスクリプトを実行
        document.addEventListener('DOMContentLoaded', () => {
            // ナビゲーションリンクのアクティブ状態を管理する関数
            const setupNavLinks = (selector, activeClass) => {
                const links = document.querySelectorAll(selector);
                const navBar = document.querySelector('nav'); // トップナビゲーションバーの要素を取得

                links.forEach(link => {
                    link.addEventListener('click', function(e) {
                        e.preventDefault(); // デフォルトのアンカー動作を停止

                        // 既存のアクティブクラスを削除
                        links.forEach(l => l.classList.remove(activeClass));
                        // クリックされたリンクにアクティブクラスを追加
                        this.classList.add(activeClass);

                        const targetId = this.getAttribute('href').substring(1); // ターゲットセクションのIDを取得
                        const targetSection = document.getElementById(targetId);

                        if (targetSection) {
                            let offset = 0;
                            // トップナビゲーションバーが表示されている場合のみオフセットを適用
                            if (window.innerWidth >= 769 && navBar) {
                                offset = navBar.offsetHeight;
                            }

                            // スクロール位置を計算
                            const scrollPosition = targetSection.offsetTop - offset;

                            window.scrollTo({
                                top: scrollPosition,
                                behavior: 'smooth'
                            });
                        }
                    });
                });
            };
            // トップナビゲーションリンクのアクティブ状態を設定
            setupNavLinks('.nav-link', 'active');
            // ボトムナビゲーションリンクのアクティブ状態を設定
            setupNavLinks('.bottom-nav-link', 'active');

            // スクロール時にナビゲーションリンクのアクティブ状態を更新する関数
            const updateNavLinkActiveState = () => {
                const sections = document.querySelectorAll('section');
                const navLinks = document.querySelectorAll('.nav-link, .bottom-nav-link');
                const navBar = document.querySelector('nav');
                // トップナビゲーションバーが表示されている場合のみ高さを取得、それ以外は0
                const fixedHeaderHeight = (window.innerWidth >= 769 && navBar) ? navBar.offsetHeight : 0;

                let currentActiveSectionId = '';

                // セクションを逆順にループし、現在ビューポートの最上部にあるセクションを見つける
                for (let i = sections.length - 1; i >= 0; i--) {
                    const section = sections[i];
                    const rect = section.getBoundingClientRect();
                    // セクションのトップが固定ヘッダーのすぐ下またはそれより上（かつセクションのボトムが固定ヘッダーより下）の場合、そのセクションをアクティブとみなす
                    if (rect.top <= fixedHeaderHeight && rect.bottom > fixedHeaderHeight) {
                        currentActiveSectionId = section.id;
                        break; // 最も上にある表示中のセクションが見つかったのでループを終了
                    }
                }

                // もしどのセクションもアクティブにならなかった場合（例: ページの一番上など）、最初のセクションをデフォルトでアクティブにする
                if (!currentActiveSectionId && sections.length > 0) {
                    currentActiveSectionId = sections[0].id;
                }

                // ナビゲーションリンクのアクティブクラスを更新
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === `#${currentActiveSectionId}`) {
                        link.classList.add('active');
                    }
                });
            };

            // スクロールイベントリスナーを追加
            window.addEventListener('scroll', updateNavLinkActiveState);
            // ページロード時にも一度実行
            updateNavLinkActiveState();

            // スクロールアニメーション (セクションのフェードイン/スライドイン)
            const sectionObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        observer.unobserve(entry.target); // 一度表示されたら監視を停止
                    }
                });
            }, {
                threshold: 0, // セクションが少しでも見えたら発火
                rootMargin: '0px' // ビューポートの端を基準にする
            });

            document.querySelectorAll('section').forEach(section => {
                sectionObserver.observe(section);
            });

            // iframeの表示/非表示を切り替える関数
            const setupIframeToggle = (buttonId, iframeId) => {
                const button = document.getElementById(buttonId);
                const iframe = document.getElementById(iframeId);
                if (button && iframe) {
                    button.addEventListener('click', () => {
                        iframe.classList.toggle('show');
                        // ボタンのテキストを現在のiframeの表示状態に合わせて更新
                        if (iframe.classList.contains('show')) {
                            button.textContent = button.textContent.replace('表示', '非表示');
                        } else {
                            button.textContent = button.textContent.replace('非表示', '表示');
                        }
                    });
                }
            };
            // 各iframeのトグルを設定
            setupIframeToggle('passed-scenario-toggle', 'passed-scenario-iframe');
            setupIframeToggle('gm-scenario-toggle', 'gm-scenario-iframe');
            setupIframeToggle('schedule-toggle', 'schedule-iframe');
                        
            // ページロード時に、初期表示されているiframeのボタンテキストを更新
            document.querySelectorAll('.responsive-iframe.show').forEach(iframe => {
                if (iframe.id === 'schedule-iframe') { // スケジュールiframeの場合のみ
                    const button = document.getElementById('schedule-toggle');
                    if (button) {
                        button.textContent = 'スケジュールを非表示';
                    }
                }
            });

            // 波紋エフェクトの追加
            const addRippleEffect = (element) => {
                element.addEventListener('click', function(e) {
                    const ripple = document.createElement('span');
                    ripple.classList.add('ripple');
                    // クリック位置に基づいて波紋の中心を設定
                    const rect = this.getBoundingClientRect();
                    const size = Math.max(rect.width, rect.height);
                    const x = e.clientX - rect.left - (size / 2);
                    const y = e.clientY - rect.top - (size / 2);
                    ripple.style.width = ripple.style.height = `${size}px`;
                    ripple.style.left = `${x}px`;
                    ripple.style.top = `${y}px`;
                    this.appendChild(ripple);
                    // アニメーション終了後に波紋要素を削除
                    ripple.addEventListener('animationend', () => {
                        ripple.remove();
                    });
                });
            };
            // ナビゲーションリンクとボタンに波紋エフェクトを適用
            document.querySelectorAll('.nav-link, .bottom-nav-link, .cool-button').forEach(el => {
                addRippleEffect(el);
            });
        });
    </script>
</body>
</html>
